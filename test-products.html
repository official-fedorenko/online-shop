<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç —Ç–æ–≤–∞—Ä–æ–≤ —Å –∑–∞–≥–ª—É—à–∫–æ–π</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="nav-container">
          <a href="/" class="nav-logo">
            <i class="fas fa-store"></i> –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –ú–∞–≥–∞–∑–∏–Ω (–¢–µ—Å—Ç)
          </a>
          <ul class="nav-menu">
            <li><a href="/" class="active">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="/cart">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
            <li class="auth-links">
              <a href="/my-orders" id="ordersLink" style="display: none"
                >–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a
              >
              <a href="/auth" id="authLink">–í–æ–π—Ç–∏</a>
              <span id="userInfo" style="display: none">
                <span id="userName"></span>
                <a href="/admin" id="adminLink" style="display: none"
                  >–ê–¥–º–∏–Ω–∫–∞</a
                >
                <a href="#" onclick="logout()">–í—ã–π—Ç–∏</a>
              </span>
            </li>
          </ul>
          <div class="cart-icon">
            <a href="/cart"> üõí <span class="cart-count">0</span> </a>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div style="padding: 20px; text-align: center">
        <h1>–¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤</h1>
        <button onclick="loadTestProducts()" class="btn btn-primary">
          –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
        </button>
        <button onclick="clearProducts()" class="btn btn-secondary">
          –û—á–∏—Å—Ç–∏—Ç—å
        </button>
        <button onclick="testAuth()" class="btn btn-success">
          –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        </button>
      </div>

      <section id="product-list">
        <div class="no-products">
          <i class="fas fa-box-open"></i>
          <h3>–ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã"</h3>
          <p>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤</p>
        </div>
      </section>
    </main>

    <script src="js/navigation.js"></script>
    <script>
      // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
      const testProducts = [
        {
          id: 1,
          name: "iPhone 15 Pro",
          description: "–ù–æ–≤–µ–π—à–∏–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω Apple —Å —Ç–∏—Ç–∞–Ω–æ–≤—ã–º –∫–æ—Ä–ø—É—Å–æ–º",
          price: 899.99,
          image_url: "https://via.placeholder.com/300x300?text=iPhone+15+Pro",
          category: "–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã",
          in_stock: true,
        },
        {
          id: 2,
          name: "MacBook Air M2",
          description: "–£–ª—å—Ç—Ä–∞–±—É–∫ Apple –Ω–∞ —á–∏–ø–µ M2",
          price: 1299.99,
          image_url: "https://via.placeholder.com/300x300?text=MacBook+Air",
          category: "–ù–æ—É—Ç–±—É–∫–∏",
          in_stock: true,
        },
        {
          id: 3,
          name: "Samsung Galaxy S24",
          description: "–§–ª–∞–≥–º–∞–Ω—Å–∫–∏–π Android —Å–º–∞—Ä—Ç—Ñ–æ–Ω",
          price: 799.99,
          image_url: "https://via.placeholder.com/300x300?text=Galaxy+S24",
          category: "–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã",
          in_stock: true,
        },
        {
          id: 4,
          name: "Xiaomi Redmi Note 13",
          description: "–î–æ—Å—Ç—É–ø–Ω—ã–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω —Å —Ö–æ—Ä–æ—à–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏",
          price: 189.99,
          image_url: "https://via.placeholder.com/300x300?text=Redmi+Note+13",
          category: "–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã",
          in_stock: true,
        },
        {
          id: 5,
          name: "USB-C –∫–∞–±–µ–ª—å",
          description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–±–µ–ª—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞—Ä—è–¥–∫–∏",
          price: 12.99,
          image_url: "https://via.placeholder.com/300x300?text=USB-C+Cable",
          category: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã",
          in_stock: true,
        },
        {
          id: 6,
          name: "–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –º—ã—à—å Logitech",
          description: "–≠—Ä–≥–æ–Ω–æ–º–∏—á–Ω–∞—è –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –º—ã—à—å –¥–ª—è —Ä–∞–±–æ—Ç—ã",
          price: 29.99,
          image_url: "https://via.placeholder.com/300x300?text=Logitech+Mouse",
          category: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã",
          in_stock: false,
        },
      ];

      // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–∑ products.js)
      function displayProducts(products) {
        const productListElement = document.getElementById("product-list");

        if (!productListElement) {
          console.error("–≠–ª–µ–º–µ–Ω—Ç product-list –Ω–µ –Ω–∞–π–¥–µ–Ω");
          return;
        }

        productListElement.innerHTML = "";

        if (!products || products.length === 0) {
          productListElement.innerHTML = `
                    <div class="no-products">
                        <i class="fas fa-box-open"></i>
                        <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ç–æ–≤–∞—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                    </div>
                `;
          return;
        }

        products.forEach((product) => {
          const productTile = document.createElement("div");
          productTile.className = "product-tile";
          productTile.setAttribute("data-product-id", product.id);
          productTile.innerHTML = `
                    <img src="${product.image_url}" 
                         alt="${product.name}" 
                         onerror="this.src='https://via.placeholder.com/300x300?text=No+Image'" />
                    
                    <div class="category">${
                      product.category || "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
                    }</div>
                    
                    <h3>${product.name}</h3>
                    
                    <div class="description">${product.description || ""}</div>
                    
                    <div class="price">‚Ç¨${product.price.toFixed(2)}</div>
                    
                    <button class="add-to-cart-btn" 
                            onclick="addToCart(${product.id})" 
                            ${!product.in_stock ? "disabled" : ""}>
                        <i class="fas fa-shopping-cart"></i> 
                        ${product.in_stock ? "–í –∫–æ—Ä–∑–∏–Ω—É" : "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏"}
                    </button>
                `;
          productListElement.appendChild(productTile);
        });
      }

      // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
      function loadTestProducts() {
        displayProducts(testProducts);
      }

      // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
      function clearProducts() {
        const productListElement = document.getElementById("product-list");
        productListElement.innerHTML = `
                <div class="no-products">
                    <i class="fas fa-box-open"></i>
                    <h3>–¢–æ–≤–∞—Ä—ã –æ—á–∏—â–µ–Ω—ã</h3>
                    <p>–ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã" –¥–ª—è –ø–æ–∫–∞–∑–∞</p>
                </div>
            `;
      }

      // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      function testAuth() {
        if (typeof saveUserData === "function") {
          saveUserData({
            token: "test-token-123",
            nickname: "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
            email: "test@example.com",
            role: "admin",
          });

          if (typeof updateNavigationAuth === "function") {
            updateNavigationAuth();
          }

          alert("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é.");
        } else {
          alert("–ú–æ–¥—É–ª—å navigation.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω");
        }
      }

      // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
      function addToCart(productId) {
        alert(`–¢–æ–≤–∞—Ä —Å ID ${productId} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É (–∑–∞–≥–ª—É—à–∫–∞)`);
      }

      // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è logout
      function logout() {
        if (typeof localStorage !== "undefined") {
          localStorage.clear();
        }
        if (typeof updateNavigationAuth === "function") {
          updateNavigationAuth();
        }
        alert("–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω");
      }
    </script>
  </body>
</html>
